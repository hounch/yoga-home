# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Decap CMS –¥–ª—è Yoga Home

## üìã –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü—Ä–æ–µ–∫—Ç –±—ã–ª —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å **Decap CMS** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–µ—Ä–æ–≤, —Ä–∞–∑–æ–≤—ã–µ –∑–∞–Ω—è—Ç–∏—è –∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–æ–º.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
yoga-home/
‚îú‚îÄ‚îÄ content/                    # YAML —Ñ–∞–π–ª—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ trainers/              # –î–∞–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ single-classes/        # –†–∞–∑–æ–≤—ã–µ –∑–∞–Ω—è—Ç–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ subscriptions/         # –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ uploads/               # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ admin/                 # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–º–∏–Ω–∫–∞ Decap CMS
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html         # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å CMS
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.yml         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CMS
‚îÇ   ‚îî‚îÄ‚îÄ config.yml             # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ lib/content.ts         # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å YAML
‚îÇ   ‚îî‚îÄ‚îÄ app/admin/page.tsx     # –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∞–¥–º–∏–Ω–∫—É
‚îî‚îÄ‚îÄ middleware.ts              # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∫–∏
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- **–ú–∏–≥—Ä–∞—Ü–∏—è —Å hardcoded –¥–∞–Ω–Ω—ã—Ö** –Ω–∞ YAML —Ñ–∞–π–ª—ã
- **–§—É–Ω–∫—Ü–∏—è `getSectionData()`** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 2. Decap CMS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **GitHub backend** –¥–ª—è –ø—Ä—è–º–æ–π —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º
- **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤** –≤ `public/uploads/`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ Git –∫–æ–º–º–∏—Ç—ã** –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

### 3. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∫–∏
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å–∫—Ä–æ–ª–ª** –≤ –º–µ–Ω—é Collections
- **–£–±—Ä–∞–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ —Å—Ç–∏–ª–∏** –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ñ–æ—Ä–º
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Decap CMS (public/admin/config.yml)
```yaml
backend:
  name: github
  repo: hounch/yoga-home
  branch: feature

media_folder: "public/uploads"
public_folder: "/uploads"

collections:
  - name: "trainers"
    label: "–¢—Ä–µ–Ω–µ—Ä—ã"
    folder: "content/trainers"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "–ò–º—è", name: "name", widget: "string"}
      - {label: "–§–æ—Ç–æ", name: "image", widget: "image"}
      - {label: "–ü–æ—Ä—è–¥–æ–∫", name: "order", widget: "number", default: 1}
      - {label: "–û–ø–∏—Å–∞–Ω–∏–µ", name: "body", widget: "markdown"}
```

### Middleware (middleware.ts)
```typescript
import { NextResponse } from 'next/server'
import type { NextRequest } from 'next/server'

export function middleware(request: NextRequest) {
  if (request.nextUrl.pathname === '/admin') {
    return NextResponse.redirect(new URL('/admin/index.html', request.url))
  }
}

export const config = {
  matcher: '/admin'
}
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
```bash
npm run dev
```

### –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω–∫–µ
1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/admin`
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ GitHub (egordolgih@mail.ru)
3. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å
1. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** ‚Üí –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã ‚Üí –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
2. **–ü—É–±–ª–∏–∫–∞—Ü–∏—è** ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Git commit
3. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** ‚Üí –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–∞–π—Ç–µ

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –¢—Ä–µ–Ω–µ—Ä—ã (content/trainers/)
```yaml
name: "–ò–º—è —Ç—Ä–µ–Ω–µ—Ä–∞"
image: "/uploads/photo.jpg"
order: 1
---
–û–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–∞ –≤ Markdown
```

### –†–∞–∑–æ–≤—ã–µ –∑–∞–Ω—è—Ç–∏—è (content/single-classes/)
```yaml
name: "–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è"
image: "/uploads/class.jpg"
cost: "1500 —Ä—É–±"
order: 1
---
–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è
```

### –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã (content/subscriptions/)
```yaml
name: "–ù–∞–∑–≤–∞–Ω–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞"
image: "/uploads/subscription.jpg"
cost: "5000 —Ä—É–±"
order: 1
---
–û–ø–∏—Å–∞–Ω–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
```

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ** –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –§–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ `content/` –∏ `public/uploads/`
- Git –∫–æ–º–º–∏—Ç—ã –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### Production
- –¢—Ä–µ–±—É–µ—Ç—Å—è `git pull` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –æ—Ç GitHub
- –ò–ª–∏ CI/CD pipeline –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

## üõ†Ô∏è –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Decap CMS
- **–ü—Ä–æ–±–ª–µ–º–∞**: Collections –Ω–µ —Å–∫—Ä–æ–ª–ª–∏–ª—Å—è, –ø–æ–ª—è —Ñ–æ—Ä–º –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å
- **–†–µ—à–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ CSS —Å—Ç–∏–ª–∏, –æ—Å—Ç–∞–≤–ª–µ–Ω —á–∏—Å—Ç—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è backend
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–∏—Å–∫ proxy server, –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–†–µ—à–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–µ–Ω GitHub backend —Å –ø—Ä—è–º—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é

### 3. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∫–∏
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ–∂–¥—É /admin –∏ /admin/
- **–†–µ—à–µ–Ω–∏–µ**: Middleware –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 4. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å
- **–†–µ—à–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø–∞–ø–∫–∞ uploads —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ
- –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è CMS —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ —Å–∞–π—Ç–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –£–¥–æ–±–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∫–∏

### üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞–Ω–∏—è –∫–æ–¥–∞
- **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Git
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **SEO-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

## üîÆ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

### –ù–æ–≤—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
–õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ `config.yml`:
```yaml
- name: "reviews"
  label: "–û—Ç–∑—ã–≤—ã"
  folder: "content/reviews"
  # ... –ø–æ–ª—è
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- –ì–∞–ª–µ—Ä–µ–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –í–∏–¥–µ–æ –∫–æ–Ω—Ç–µ–Ω—Ç
- SEO –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- Webhook –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram/Slack
- –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é!** üöÄ 